<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
<script>
    function playRound() {
        // Function to get the computers choice and assign it to the 'x' variable
        function getComputerChoice() {
            function getRandomInt(max) {
                return Math.floor(Math.random()*max);
            }

            let randomInt = getRandomInt(3) 
                    
            if (randomInt === 0) {
                computerChoice = 'rock';
            } else if (randomInt === 1) {
                computerChoice = 'paper';
            } else {
                computerChoice = 'scissors';
            }
            return computerChoice
        }
        let x = getComputerChoice();

        // Function to get the players choice via prompt and assign it to the 'y' variable 
        function getPlayerChoice() {
            let input = prompt('Pick rock, paper or scissors.');
            input = input.toLowerCase()
            if (input === 'rock'||input === 'paper'||input === 'scissors') {
                playerChoice = input;
            } else {
                alert('You must pick rock, paper or scissors!')
                playerChoice = getPlayerChoice()
            }
            return playerChoice.toLowerCase();
        }
        let y = getPlayerChoice();

        // This runs the game using y(player choice) and x(comp choice) concatenated as inputs. And gives extra context as to who chose what.
        let result = y+x
        let winner = 'tie'
        console.log('You chose '+y)
        console.log('The computer chose '+x)

        // This gives the game result, be it a win a loss or a tie by processing the concatenated result
        if (result === 'rockscissors' || result === 'paperrock' || result === 'scissorspaper') {
            winner = 'You won!';
        } else if (result === 'rockpaper' || result === 'paperscissors' || result === 'scissorsrock') {
            winner = 'You lost.';
        } else {
            winner = 'A tie!';
        }
        console.log(winner)
        return winner
    }

    // This plays an entire game which consists of 5 rounds and tallies the results to return an overall winner
    function playGame() {
        let playerWins = 0
        let compWins = 0
        let ties = 0
        // Game 1
        let winner = playRound()
        if (winner === 'You won!') {
            playerWins++
        } else if (winner === 'You lost.'){
            compWins++
        } else {
            ties++
        }
        // Game 2
        winner = playRound()
        if (winner === 'You won!') {
            playerWins++
        } else if (winner === 'You lost.'){
            compWins++
        } else {
            ties++
        }
        // Game 3
        winner = playRound()
        if (winner === 'You won!') {
            playerWins++
        } else if (winner === 'You lost.'){
            compWins++
        } else {
            ties++
        }
        // Game 4
        winner = playRound()
        if (winner === 'You won!') {
            playerWins++
        } else if (winner === 'You lost.'){
            compWins++
        } else {
            ties++
        }
        // Game 5
        winner = playRound()
        if (winner === 'You won!') {
            playerWins++
        } else if (winner === 'You lost.'){
            compWins++
        } else {
            ties++
        }
        // This compares the tallies to see who's won
        let gameWinner = 'Unknown'        
        if (playerWins > compWins) {
            gameWinner = 'Congratulations! You won the game ' + playerWins + ' to ' + compWins + ' with ' + ties + ' ties';
        } else if (compWins > playerWins) {
            gameWinner = 'Commiserations. You lost the game ' + compWins + ' to ' + playerWins + ' with ' + ties + ' ties';
        } else {
            gameWinner = 'Wow, a tie! ' + playerWins + ' to ' + compWins + ' with ' + ties + ' ties';
        }
        return gameWinner
    }
</script>
</body>
</html>